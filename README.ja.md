# レインバレル

> このプロジェクトは、スマートな水タンクに関するものです。水位を測定し、データをサーバーに送信します。サーバーを使用してウォーターポンプを制御できます。ポンプは、Web インターフェイスまたは電報ボットを介して制御できます。 HC-SR04超音波センサーを使用して水位を測定します。データは LoRaWAN ゲートウェイ経由で TTN に送信されます。

?> 元の文書は[英語](README.md).翻訳はGoogle翻訳で行いました。エラーが見つかった場合は、無視してください。ありがとう！

* * *

## 目次

1.  **クイックスタート**
    1.  序章
    2.  ハードウェア
    3.  フラッシュソフトウェア
2.  **ハードウェア**
    1.  センサー
    2.  電源
    3.  ハウジング
    4.  マイクロコントローラ
    5.  アンテナ
3.  **組み立て**
    1.  センサーからコントローラー
    2.  コントローラへの電源
    3.  トラブルシューティング
4.  **設定**
    1.  TTN
        1.  アカウントを作成する
        2.  アプリの作成
        3.  デコーダーの構成
        4.  資格証明のコピー
    2.  デバイス
        1.  ドライバをダウンロード
        2.  点滅
        3.  構成
5.  **デバッグ**
    1.  シリアルモニター
    2.  TTN コンソール
    3.  MQTT クライアント
    4.  落とし穴
6.  **データエンジニアリング**
    1.  ノードレッド
    2.  グラファナ
    3.  アレクサスキル
    4.  アズール コネクト

* * *

## クイックスタート

### クイック スタート - はじめに

クイックスタートは、Arudino フレームワークを使用した IoT についての深い知識と、すぐに開始したい人向けに作成されています。それがどのように機能するかを理解したい場合は、[ドキュメンテーション](#hardware)。

### クイック スタート - ハードウェアの概要

次の部品が必要です。

![Overview](_media/hardware/hardware-overview.png)

-   LoRa チップを搭載したマイクロコントローラ
-   センサー
-   電源
-   ハウジング

?> パーツについて詳しく知りたい場合は、[ハードウェアのドキュメント](#Hardware)。

### クイックスタート - Flash ソフトウェア

1.  ボードをコンピュータに接続し、
2.  次のボタンをクリックします。

<esp-web-install-button manifest="/static/firmware_build/manifest.json"></esp-web-install-button>

?> 点滅プロセスについて詳しく知りたい場合は、[セットアップ ドキュメント](#Setup)。

## ハードウェア

1.  [センサー](#Sensors)
2.  [電源](#Power-supply)
3.  [ハウジング](#Housing)
4.  [マイクロコントローラ](#Microcontroller)
5.  [アンテナ](#Antenna)

### センサー

水位を測るにはセンサーが必要です。防水で水槽内で使用できるセンサーを見つけるのは簡単なことではありません。次のセンサーがサポートされており、推奨されています。

| 部                                                                   | 説明                                                                                                                                                                                                                      |
| ------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <img src="_media/hardware/sensor-hcsr04.svg" alt="HC-S04 sensor" /> | [HC-SR04 超音波センサー](https://www.amazon.de/gp/product/B07B4J8QZK/ref=ppx_yo_dt_b_asin_title_o00_s00?ie=UTF8&psc=1)センサーは比較的安価で使いやすいです。防水ではありません。防水ケースに入れる必要があります。試してみたいだけなら、このセンサーをお勧めします。長期間の使用はお勧めできません。                  |
| <img src="_media/hardware/sensor-hcsr04.svg">                       | [レーザーセンサー](https://www.amazon.de/gp/product/B07B4J8QZK/ref=ppx_yo_dt_b_asin_title_o00_s00?ie=UTF8&psc=1)センサーは比較的安価で使いやすいです。 HC-SRo4 と同様、防水ではありませんが精度が向上しています。防水ケースに入れる必要があります。試してみたいだけなら、このセンサーをお勧めします。長期間の使用はお勧めできません。 |

#### 初心者

| 部                                                   | 説明                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| --------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| ![HC-S04 sensor](_media/hardware/sensor-hcsr04.svg) | [HC-SR04 超音波センサー](https://www.amazon.de/gp/product/B07B4J8QZK/ref=ppx_yo_dt_b_asin_title_o00_s00?ie=UTF8&psc=1)センサーは比較的安価で使いやすいです。防水ではありません。防水ケースに入れる必要があります。試してみたいだけなら、このセンサーをお勧めします。長期間の使用はお勧めできません。の**HC-SR04**センサーは、距離測定に使用される超音波センサーです。高周波の音波を発し、物体に衝突してから波が跳ね返るまでの時間を検出します。この時間は、センサーとオブジェクト間の距離を計算するために使用されます。通信範囲は最大 4 メートルで、Arduino、Raspberry Pi などのマイクロコントローラと接続できます。HC-SR04 は、ロボティクス、自動化、セキュリティ システム、および正確で信頼性の高い距離センシングを必要とするその他のアプリケーションで一般的に使用されています。 |
| ![](_media/hardware/sensor-vl6180x.svg)             | [BL6180X](https://amzn.to/3zVEFPM)飛行時間センサーは比較的安価で使いやすいです。 VL6180X レーザー距離モジュールは、レーザーを使用してセンサーと物体の間の距離を測定するセンサーです。これは飛行時間型 (ToF) センサーです。つまり、レーザー光が物体に反射してセンサーに戻るまでの時間を測定します。センサーは防水ではありませんが、より高い精度を備えています。防水ケースに入れる必要があります。試してみたいだけなら、このセンサーをお勧めします。長期間の使用はお勧めできません。                                                                                                                                                                                                  |

The **HC-SR04**センサーは、距離測定に使用される超音波センサーです。高周波の音波を発し、物体に衝突してから波が跳ね返るまでの時間を検出します。この時間は、センサーとオブジェクト間の距離を計算するために使用されます。通信範囲は最大 4 メートルで、Arduino、Raspberry Pi などのマイクロコントローラと接続できます。HC-SR04 は、ロボティクス、自動化、セキュリティ システム、および正確で信頼性の高い距離センシングを必要とするその他のアプリケーションで一般的に使用されています。

HC-SR04 センサーは、超音波距離センシング デバイスです。送信機と受信機の2つの部分で構成されています。エミッターは空気中を伝わる 40kHz の超音波を放出し、オブジェクトに遭遇すると反射してレシーバーに戻ります。次に、センサーは音波が戻ってくるまでの時間を測定し、この値を使用して対象物までの距離を計算します。 2 cm から 400 cm までの距離を最大 3 mm の精度で測定できます。

-   [HC-SR04 超音波センサー](https://www.amazon.de/gp/product/B07B4J8QZK/ref=ppx_yo_dt_b_asin_title_o00_s00?ie=UTF8&psc=1)
-   [BL6180X](https://amzn.to/3zVEFPM)

#### 高度

-   [水センサー](https://www.amazon.de/gp/product/B07B4J8QZK/ref=ppx_yo_dt_b_asin_title_o00_s00?ie=UTF8&psc=1)
-   [防水超音波センサー](https://www.amazon.de/gp/product/B07B4J8QZK/ref=ppx_yo_dt_b_asin_title_o00_s00?ie=UTF8&psc=1)

### 電源

マイクロコントローラに電力を供給するには、電源が必要です。 18650 バッテリーが最適です。安いし、ソーラーパネルで充電できます。ただし、モバイルバッテリーまたは USB 電源を使用することもできます。

| 部                                                     | 説明                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| ----------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| <img src="_media/hardware/hardware-18650.svg" />      | 電池にはたくさんの種類があります。最も一般的なのは、リチウム イオン、リチウム ポリマー、リン酸鉄リチウムです。の**18650 バッテリー**リチウムイオン電池です。これは、このプロジェクトに最適なオプションです。安いし、ソーラーパネルで充電できます。リチウムイオンでできており、最大500回充電できます。 18650バッテリーの電圧は3.7Vで、容量は約2200mAhです。ソーラーパネルの電圧は5V、電力は2Wです。ソーラーパネルは3時間でバッテリーを充電できます。当社のセンサーには 5V と 100mA が必要です。マイクロコントローラには 5V と 100mA が必要です。したがって、5Vを得るには電圧レギュレーターと18650バッテリーが2つ必要です。バッテリーは防水ではありません。防水ケースに入れる必要があります。また、高温にも注意してください。熱すぎるとバッテリーが爆発する可能性があります。長く使いたい方はこちらのバッテリーがおすすめです。 |
| <img src="_media/hardware/hardware-solarpanel.png" /> | **ソーラーパネル：**陶器は庭にあるので、ソーラーパネルを使用できます。防水仕様で雨天でも使用可能です。多結晶シリコンでできており、2Wの電力を持っています。ソーラー パネルを購入する場合は、少なくとも 400mA の 5V 出力があることを確認する必要があります。バッテリーを充電するには、充電コントローラーが必要です。幸いなことに、マイクロコントローラーには充電コントローラーが組み込まれているため、ソーラーパネルを直接使用できます。                                                                                                                                                                                                                     |

### ハウジング

センサーとマイクロコントローラーを保護するには、ハウジングが必要です。ハウジングは防水性があり、高温や紫外線に少し耐性がある必要があります。
プロトタイプにのみ PLA を使用します。防水ではなく、紫外線によって破壊される可能性があります。長期間使用する場合はABSを使用してください。防水性と耐紫外線性があります。 PETG も使用できます。防水性と耐紫外線性があります。ただし、ABSほどの強度はありません。

タッパーウェアも良い選択肢です。防水性と耐紫外線性があります。

### マイクロコントローラ

マイクロコントローラはシステムの頭脳です。水位を測定し、データをサーバーに送信します。次のマイクロコントローラがサポートされ、推奨されています。

| 部                                                  | 説明                                                                                                                                                 |
| -------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------- |
| <img src="_media/hardware/hardware-esplora.svg" /> | **ひいきにする傾向があります：**TTGO LoRa32 は、LoRa モジュールを搭載したマイクロコントローラーです。安くて使いやすいです。防水ではありません。防水ケースに入れる必要があります。試してみたいだけなら、このマイクロコントローラをお勧めします。長期間の使用はお勧めできません。 |

* * *

| 部                                                                 | 説明                                                                                                              |
| ----------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------- |
| <img src="_media/hardware/sensor-hcsr04.svg" width="244" />       | [HC-SR04 超音波センサー](https://www.amazon.de/gp/product/B07B4J8QZK/ref=ppx_yo_dt_b_asin_title_o00_s00?ie=UTF8&psc=1) |
| <img src="_media/hardware/hardware-esplora.svg" width="244" />    | [放牧に向かう](https://www.amazon.de/gp/product/B07B4J8QZK/ref=ppx_yo_dt_b_asin_title_o00_s00?ie=UTF8&psc=1)          |
| <img src="_media/hardware/hardware-18650.svg" width="144" />      | 18650 バッテリー                                                                                                     |
| <img src="_media/hardware/hardware-solarpanel.svg" width="244" /> | ソーラーパネル                                                                                                         |

次の部分は推奨事項です。必要に応じて、他のパーツを使用できます。ただし、コードを変更する必要がある場合があります。以下の部品が推奨されます。

#### ロラワン

-   LoRaWAN ゲートウェイ

#### マイクロコントローラ

ソフトウェアを実行するにはボードが必要であることは明らかです。ただし、データを TTN に送信するには LoRa チップも必要です。次のボードがサポートされています。

-   [放牧に向かう](Hardware/TTGOLoRa32.md)
-   [ヘルテック LoRa32](Hardware/HeltecLoRa32.md)

### 回路図

![Schematic](https://raw.githubusercontent.com/Regenfass/Regenfass/master/Hardware/Schematic.png)

### 3Dプリント部品

## ソフトウェア

### アルドゥイーノ

-   [アルドゥイーノ](Software/Arduino/README.md)

### サーバ

-   [サーバ](Software/Server/README.md)

### 電報ボット

-   [電報ボット](Software/TelegramBot/README.md)

## ライセンス

[表示-非営利-継承 4.0 国際 (CC BY-NC-SA 4.0)](https://creativecommons.org/licenses/by-nc-sa/4.0/)

**あなたは自由にできます：**

-   共有 — 任意の媒体または形式で資料をコピーおよび再配布します
-   適応 — 素材をリミックス、変換、構築する

* * *

_❤️で作られました[文書化する](https://docsify.js.org/)_
